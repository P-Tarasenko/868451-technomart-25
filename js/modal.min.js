if(document.querySelector(".modal-map")){var link=document.querySelector(".contacts-button"),mailPopup=document.querySelector(".modal-mail"),mailClose=document.querySelector(".mail-close"),form=document.querySelector(".mail-form"),userName=document.querySelector("[name=user-name]"),userEmail=document.querySelector("[name=user-email]"),userComment=document.querySelector("#modal-text"),storageSupport=!0,nameStorage="",emailStorage="",mapLink=document.querySelector(".contacts-link"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".close-map");try{nameStorage=localStorage.getItem("userName"),emailStorage=localStorage.getItem("userEmail")}catch(e){storageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),mailPopup.classList.add("modal-show"),nameStorage?(userName.value=nameStorage,userComment.focus()):userName.focus(),emailStorage&&(userEmail.value=emailStorage)}),mailClose.addEventListener("click",function(e){e.preventDefault(),mailPopup.classList.remove("modal-show"),mailPopup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){userName.value&&userEmail.value?storageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),mailPopup.classList.remove("modal-error"),mailPopup.offsetWidth=mailPopup.offsetWidth,mailPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mailPopup.classList.contains("modal-show")&&(mailPopup.classList.remove("modal-show"),mailPopup.classList.remove("modal-error")))}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show"))})}else{var index,button,catalogPopup=document.querySelector(".catalog-modal"),catalogClose=catalogPopup.querySelector(".close-modal"),buy=document.querySelectorAll(".actions-buy");for(index=0;index<buy.length;index++)(button=buy[index]).addEventListener("click",clickHandler);function clickHandler(e){e.preventDefault(),catalogPopup.classList.add("modal-show")}catalogClose.addEventListener("click",function(e){e.preventDefault(),catalogPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),catalogPopup.classList.contains("modal-show")&&catalogPopup.classList.remove("modal-show"))})}